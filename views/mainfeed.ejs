<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles/style_mainfeed.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css" />

    <script defer src="myscripts.js"></script>
    <title>Main Feed</title>
  </head>
  
  <body>
    <div class="wrapper">
      <div class="posts-container">

        <% feed.user.buckets.forEach( bucket => { %> 
          <% bucket.messages.forEach( message => { %>
            <div class="post">
              <a href="/profile/<%=user_id%>">
              <img src="<%=feed.user.profileImg %>" style="z-index: 0;  margin-top: 3vh;  width: 6.5vh; height: auto;"  class="user-picture user-avatar"></a>
              <div class="post-content" style="padding: 10px">
               
                <p class="feed.user.username"><%= feed.user.username %></p>
                <p class="bucket-info">
                  <%= bucket.title %>
                  <span class="<%= bucket.completed ? 'Completed': 'InProgress' %>"><%= bucket.completed ? 'Completed': 'In Progress' %></span>
                </p>
                <p class="post-message"><%= message.content %></p>
              </div>
            </div>
      <% }) %>
     <% }) %>
     
        <% feed.following.forEach(user => { %> 
          <% user.buckets.forEach( bucket => { %> 
            <% bucket.messages.forEach( message => { %>
              <div class="post">
                <a href="/profile/<%=user.id%>">
                <img src="<%=user.profileImg %>"style="z-index: 0;  width: 6.5vh; height: auto;"  class="user-picture user-avatar"></a>
                <div class="post-content" style="padding: 10px">
                 
                  <p class="username"><%= user.username %></p>
                  <p class="bucket-info">
                    <%= bucket.title %>
                    <span class="<%= bucket.completed ? 'Completed': 'InProgress' %>"><%= bucket.completed ? 'Completed': 'In Progress' %></span>
                  </p>
                  <p class="post-message"><%= message.content %></p>
                  
                </div>
              </div>
        <% }) %>
       <% }) %>
      <% }) %>

     

      </div>
      <div class="navbar">
        <a href="/feeds/home">
          <img
            src="../styles/images/home_icon_noBackground2.png"
            alt="Home"
            width="50"
            height="50"
          />
        </a>
        <a href="/search/">
          <img
            src="../styles/images/search_icon_noBackground2.png"
            alt="Search"
            width="50"
            height="50"
          />
        </a>
        <div class="circle">
          <a href="/feeds/buckets?show=inprogress">
            <img
              src="../styles/images/bucket_icon_noBackground.png"
              alt="Bucket"
              width="60"
              height="60"
            />
          </a>
        </div>
        <a href="/notes">
          <img
            src="../styles/images/note_icon_noBackground.png"
            alt="Notes"
            width="50"
            height="50"
          />
        </a>
        <a href="/profile/<%=user_id%>">
          <img
            src="../styles/images/profile_icon_noBackground2.png"
            alt="Profile"
            width="50"
            height="50"
          />
        </a>
      </div>
    </div>

    <script>
      function toggleLike(event) {
    const likeButton = event.target.closest('.like-button');
    const heartIcon = likeButton.querySelector('i');
    heartIcon.classList.toggle('far');
    heartIcon.classList.toggle('fas');
  }
      
    </script>
  </body>
</html>
